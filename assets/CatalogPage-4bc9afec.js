import{r,j as e,L as x,a as F,P as j}from"./index-780a81cf.js";import{g as E,a as M,n as k,C as q,F as w,b as T,c as A}from"./CarList-1a1f6ea0.js";import"./Container.styled-85e7931f.js";const B=({favorites:y,setFavorites:C})=>{const[i,b]=r.useState([]),[c,L]=r.useState([]),[u,N]=r.useState(1),[d,P]=r.useState({}),[S,g]=r.useState(!1),[I,m]=r.useState(!1),R=r.useRef(null),l=r.useRef(null);r.useEffect(()=>{g(!0),E().then(a=>{b(a)}).finally(()=>g(!1))},[]),r.useEffect(()=>{m(!0),M(u).then(a=>{L(o=>[...o,...a])}).finally(()=>{m(!1),l.current&&l.current.scrollIntoView({behavior:"smooth"})})},[u]);const v=()=>{N(a=>a+1)};let t=i;const f=JSON.stringify(d)!=="{}";if(f){const{make:a="",price:o="",from:p,to:h}=d;if(a!==""&&(t=t.filter(s=>s.make===a)),o!==""&&(t=t.filter(s=>Number(s.rentalPrice.substr(1))<=Number(o)).sort((s,n)=>Number(s.rentalPrice.substr(1))-Number(n.rentalPrice.substr(1)))),p!==""){const s=parseInt(p.replace(/,/g,""),10);t=t.filter(n=>parseInt(n.mileage,10)>=s)}if(h!==""){const s=parseInt(h.replace(/,/g,""),10);t=t.filter(n=>parseInt(n.mileage,10)<=s)}t.length===0&&k.Notify.failure("Sorry, there are no cars matching your criteria.")}return e.jsx(q,{children:S?e.jsx("div",{children:e.jsx(x,{})}):e.jsxs(e.Fragment,{children:[e.jsx(w,{setFilter:P}),(i==null?void 0:i.length)>0?e.jsxs(T,{ref:R,children:[e.jsx(A,{cars:f&&t.length!==0?t:c,favorites:y,setFavorites:C}),e.jsx("div",{ref:l}),I&&e.jsx("div",{children:e.jsx(x,{})})]}):e.jsx("h2",{children:"Unfortunately, we couldn't find any cars"}),i.length>c.length&&(!f||t.length===0)&&e.jsx(F,{type:"button",onClick:v,children:"Load more"})]})})};B.propTypes={favorites:j.array.isRequired,setFavorites:j.func.isRequired};export{B as default};
