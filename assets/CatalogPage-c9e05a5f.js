import{r,j as t,L as x,a as F,P as j}from"./index-2223f87f.js";import{g as E,a as M,n as k,C as q,F as w,b as T,c as A}from"./CarList-21268d3c.js";import"./Container.styled-a47f3c9c.js";const B=({favorites:y,setFavorites:C})=>{const[i,b]=r.useState([]),[c,L]=r.useState([]),[u,N]=r.useState(1),[d,P]=r.useState({}),[S,g]=r.useState(!1),[I,m]=r.useState(!1),R=r.useRef(null),l=r.useRef(null);r.useEffect(()=>{g(!0),E().then(a=>{b(a)}).finally(()=>g(!1))},[]),r.useEffect(()=>{m(!0),M(u).then(a=>{L(o=>[...o,...a])}).finally(()=>{m(!1),l.current&&l.current.scrollIntoView({behavior:"smooth"})})},[u]);const v=()=>{N(a=>a+1)};let e=i;const f=JSON.stringify(d)!=="{}";if(f){const{make:a="",price:o="",from:p,to:h}=d;if(a!==""&&(e=e.filter(s=>s.make===a)),o!==""&&(e=e.filter(s=>Number(s.rentalPrice.substr(1))<=Number(o)).sort((s,n)=>Number(s.rentalPrice.substr(1))-Number(n.rentalPrice.substr(1)))),p!==""){const s=parseInt(p.replace(/,/g,""),10);e=e.filter(n=>parseInt(n.mileage,10)>=s)}if(h!==""){const s=parseInt(h.replace(/,/g,""),10);e=e.filter(n=>parseInt(n.mileage,10)<=s)}e.length===0&&k.Notify.failure("Sorry, there are no cars matching your criteria.")}return t.jsx(q,{children:S?t.jsx("div",{children:t.jsx(x,{})}):t.jsxs(t.Fragment,{children:[t.jsx(w,{setFilter:P,filteredCars:e}),(i==null?void 0:i.length)>0?t.jsxs(T,{ref:R,children:[t.jsx(A,{cars:f&&e.length!==0?e:c,favorites:y,setFavorites:C}),t.jsx("div",{ref:l}),I&&t.jsx("div",{children:t.jsx(x,{})})]}):t.jsx("h2",{children:"Unfortunately, we couldn't find any cars"}),i.length>c.length&&(!f||e.length===0)&&t.jsx(F,{type:"button",onClick:v,children:"Load more"})]})})};B.propTypes={favorites:j.array.isRequired,setFavorites:j.func.isRequired};export{B as default};
